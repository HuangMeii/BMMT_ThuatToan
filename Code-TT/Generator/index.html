<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phần Tử Sinh trong Z*p - Lý Thuyết và Ứng Dụng</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        h1, h2, h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        .theory-section {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #3498db;
        }
        .definition {
            background-color: #e8f4fc;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .theorem {
            background-color: #f0f7eb;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #2ecc71;
        }
        .example {
            background-color: #fef9e7;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #f39c12;
        }
        .input-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        input[type="number"] {
            width: 100px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 18px;
            margin-right: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        .button-group {
            margin: 25px 0;
            display: flex;
            flex-wrap: wrap;
        }
        .result {
            margin-top: 25px;
            padding: 20px;
            background-color: #e8f4fc;
            border-radius: 4px;
        }
        .matrix {
            margin: 15px 0;
            font-family: monospace;
            white-space: pre;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .instructions {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 4px;
            margin-top: 30px;
            border-left: 4px solid #3498db;
        }
        .error {
            color: #e74c3c;
            font-weight: bold;
            background-color: #fdecea;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            color: #27ae60;
            font-weight: bold;
            background-color: #e8f8f0;
            padding: 10px;
            border-radius: 4px;
        }
        .math {
            font-family: "Times New Roman", serif;
            font-style: italic;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        .primitive-root {
            background-color: #d5f5e3;
            font-weight: bold;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #eee;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }
        .tab.active {
            background-color: #3498db;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        #resultTable {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
            box-shadow: 0 2px 3px rgba(0,0,0,0.1);
        }
        #resultTable th, #resultTable td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        #resultTable th {
            background-color: #3498db;
            color: white;
        }
        #resultTable tr:nth-child(even) {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Phần Tử Sinh trong Nhóm Nhân Z*p</h1>
        <p>Tìm và kiểm tra các phần tử sinh của nhóm nhân modulo p</p>
        
        <div class="tabs">
            <div class="tab active" onclick="switchTab('theory')">Lý Thuyết</div>
            <div class="tab" onclick="switchTab('practice')">Thực Hành</div>
        </div>
        
        <div id="theory" class="tab-content active">
            <div class="theory-section">
                <h2>1. Giới thiệu về Phần Tử Sinh</h2>
                <p>Phần tử sinh (primitive root) của nhóm nhân Z*p là phần tử có bậc bằng ϕ(p) = p-1 (khi p là số nguyên tố). Các lũy thừa của phần tử sinh sẽ sinh ra toàn bộ nhóm Z*p.</p>
                
                <div class="definition">
                    <h3>Định nghĩa Nhóm Nhân Z*p</h3>
                    <p>Cho p là một số nguyên tố. Nhóm nhân Z*p được định nghĩa là tập hợp các số nguyên không chia hết cho p với phép toán nhân modulo p:</p>
                    <p class="math">Z*p = {1, 2, ..., p-1}</p>
                    <p>Đây là một nhóm hữu hạn có bậc p-1 (ϕ(p) = p-1 khi p nguyên tố).</p>
                </div>
                
                <div class="definition">
                    <h3>Định nghĩa Phần Tử Sinh</h3>
                    <p>Một phần tử g ∈ Z*p được gọi là phần tử sinh nếu bậc của g bằng ϕ(p) = p-1:</p>
                    <p class="math">Ord(g) = p-1</p>
                    <p>Điều này có nghĩa các lũy thừa của g sẽ sinh ra toàn bộ nhóm Z*p:</p>
                    <p class="math">{g¹ mod p, g² mod p, ..., g^(p-1) mod p} = Z*p</p>
                </div>
                
                <div class="theorem">
                    <h3>Định lý về Sự Tồn Tại Phần Tử Sinh</h3>
                    <p>Nhóm nhân Z*p là nhóm cyclic khi và chỉ khi p là số nguyên tố hoặc p=2,4 hoặc p=qⁿ hay 2qⁿ với q là số nguyên tố lẻ.</p>
                    <p>Đặc biệt, với p là số nguyên tố, Z*p luôn là nhóm cyclic và có đúng ϕ(p-1) phần tử sinh.</p>
                </div>
                
                <div class="example">
                    <h3>Ví dụ minh họa</h3>
                    <p>Xét p=7. Ta có Z*7 = {1,2,3,4,5,6} với ϕ(7)=6.</p>
                    <p>Các phần tử sinh của Z*7:</p>
                    <ul>
                        <li>Ord(3)=6 vì 3¹=3, 3²=2, 3³=6, 3⁴=4, 3⁵=5, 3⁶=1 mod 7</li>
                        <li>Tương tự, Ord(5)=6</li>
                    </ul>
                    <p>Vậy tập phần tử sinh của Z*7 là {3,5} (ϕ(6)=2 phần tử).</p>
                </div>
                
                <h2>2. Thuật toán tìm phần tử sinh</h2>
                <ol>
                    <li>Phân tích p-1 thành các thừa số nguyên tố: p-1 = q₁^e₁ × q₂^e₂ × ... × qₖ^eₖ</li>
                    <li>Với mỗi a ∈ Z*p, kiểm tra a^((p-1)/qᵢ) ≢ 1 mod p với mọi qᵢ</li>
                    <li>Nếu a thỏa mãn điều kiện trên thì a là phần tử sinh</li>
                </ol>
                
                <h2>3. Ứng Dụng của Phần Tử Sinh</h2>
                <table>
                    <tr>
                        <th>Lĩnh vực</th>
                        <th>Ứng dụng</th>
                    </tr>
                    <tr>
                        <td>Mật mã học</td>
                        <td>Cơ sở cho hệ mật Diffie-Hellman, ElGamal, DSA</td>
                    </tr>
                    <tr>
                        <td>Lý thuyết số</td>
                        <td>Nghiên cứu cấu trúc nhóm cyclic, logarit rời rạc</td>
                    </tr>
                    <tr>
                        <td>Thuật toán</td>
                        <td>Kiểm tra nguyên tố, tạo số ngẫu nhiên</td>
                    </tr>
                    <tr>
                        <td>Mã hóa</td>
                        <td>Xây dựng các hệ thống mã hóa công khai</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div id="practice" class="tab-content">
            <h2>Công Cụ Tìm Phần Tử Sinh</h2>
            
            <div class="input-group">
                <label for="inputP">Nhập số nguyên tố p (2 ≤ p ≤ 1000):</label>
                <input type="number" id="inputP" min="2" max="1000" placeholder="Ví dụ: 7, 13, 17">
            </div>
            
            <div class="button-group">
                <button onclick="calculate()">Tìm Phần Tử Sinh</button>
                <button onclick="clearAll()">Xóa tất cả</button>
                <button onclick="showExample()">Ví dụ mẫu</button>
            </div>
            
            <div class="result">
                <h3>Kết quả:</h3>
                <div id="resultText"></div>
                
                <table id="resultTable">
                    <thead>
                        <tr>
                            <th>a ∈ Z*p</th>
                            <th>Bậc Ord(a)</th>
                            <th>Kiểm tra phần tử sinh</th>
                            <th>Các lũy thừa của a</th>
                        </tr>
                    </thead>
                    <tbody id="resultBody"></tbody>
                </table>
                
                <div id="status"></div>
            </div>
            
            <div class="instructions">
                <h3>Hướng dẫn sử dụng:</h3>
                <ol>
                    <li>Nhập một số nguyên tố p (2 ≤ p ≤ 1000)</li>
                    <li>Nhấn "Tìm Phần Tử Sinh" để liệt kê tất cả phần tử và kiểm tra phần tử sinh</li>
                    <li>Kết quả sẽ hiển thị bảng các phần tử trong Z*p với bậc và kiểm tra phần tử sinh</li>
                    <li>Phần tử sinh sẽ được đánh dấu màu xanh lá</li>
                    <li>Nhấn "Ví dụ mẫu" để xem ví dụ minh họa</li>
                </ol>
                <p><strong>Lưu ý:</strong> Với p nguyên tố, nhóm Z*p luôn có ϕ(p-1) phần tử sinh.</p>
            </div>
        </div>
    </div>

    <script>
        // Chuyển đổi giữa các tab
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }
        
        // Kiểm tra số nguyên tố
        function isPrime(n) {
            if (n < 2) return false;
            if (n === 2) return true;
            if (n % 2 === 0) return false;
            for (let i = 3; i * i <= n; i += 2) {
                if (n % i === 0) return false;
            }
            return true;
        }
        
        // Tính lũy thừa modulo
        function modExp(base, exp, mod) {
            let result = 1n;
            base = BigInt(base) % BigInt(mod);
            exp = BigInt(exp);
            mod = BigInt(mod);
            
            while (exp > 0n) {
                if (exp % 2n === 1n) {
                    result = (result * base) % mod;
                }
                base = (base * base) % mod;
                exp = exp / 2n;
            }
            return Number(result);
        }
        
        // Tìm bậc của phần tử a trong Z*p
        function findOrder(a, p) {
            if (a % p === 0) return 0;
            let order = 1;
            let current = a % p;
            
            while (current !== 1) {
                current = (current * a) % p;
                order++;
                if (order > p) return p; // Tránh vòng lặp vô hạn
            }
            return order;
        }
        
        // Liệt kê các lũy thừa của a
        function getPowers(a, p) {
            let powers = [];
            let current = 1;
            for (let i = 1; i < p; i++) {
                current = (current * a) % p;
                powers.push(current);
            }
            return powers.join(", ");
        }
        
        // Tìm tất cả phần tử sinh
        function findPrimitiveRoots(p) {
            let results = [];
            let phi = p - 1;
            
            for (let a = 1; a < p; a++) {
                let order = findOrder(a, p);
                let isPrimitive = order === phi;
                results.push({ 
                    a, 
                    order, 
                    isPrimitive,
                    powers: getPowers(a, p)
                });
            }
            return results;
        }
        
        // Hàm tính Euler's totient function ϕ(n)
        function eulerPhi(n) {
            let result = n;
            for (let p = 2; p * p <= n; p++) {
                if (n % p === 0) {
                    while (n % p === 0) n /= p;
                    result -= result / p;
                }
            }
            if (n > 1) result -= result / n;
            return result;
        }
        
        // Tính toán và hiển thị kết quả
        function calculate() {
            const p = parseInt(document.getElementById('inputP').value);
            
            if (!isPrime(p)) {
                document.getElementById('status').innerHTML = 
                    `<div class="error">Vui lòng nhập một số nguyên tố hợp lệ (2 ≤ p ≤ 1000)</div>`;
                return;
            }
            
            const results = findPrimitiveRoots(p);
            let primitiveRoots = results.filter(r => r.isPrimitive).map(r => r.a);
            
            let resultText = "";
            if (primitiveRoots.length > 0) {
                resultText = `Nhóm Z*${p} có ϕ(${p-1})=${eulerPhi(p-1)} phần tử sinh: { ${primitiveRoots.join(", ")} }`;
            } else {
                resultText = `Nhóm Z*${p} không có phần tử sinh (điều này không xảy ra với p nguyên tố)`;
            }
            document.getElementById('resultText').innerHTML = `<strong>${resultText}</strong>`;
            
            let tbody = document.getElementById('resultBody');
            tbody.innerHTML = "";
            
            results.forEach(r => {
                let row = tbody.insertRow();
                if (r.isPrimitive) row.className = "primitive-root";
                
                row.insertCell(0).textContent = r.a;
                row.insertCell(1).textContent = r.order;
                row.insertCell(2).textContent = r.isPrimitive ? "✓ Là phần tử sinh" : "";
                row.insertCell(3).textContent = r.powers;
            });
            
            document.getElementById('status').innerHTML = 
                `<div class="success">Đã tìm thấy ${primitiveRoots.length} phần tử sinh trong Z*${p}</div>`;
        }
        
        // Xóa tất cả
        function clearAll() {
            document.getElementById('inputP').value = '';
            document.getElementById('resultText').innerHTML = '';
            document.getElementById('resultBody').innerHTML = '';
            document.getElementById('status').innerHTML = '';
        }
        
        // Hiển thị ví dụ mẫu
        function showExample() {
            document.getElementById('inputP').value = '17';
            document.getElementById('status').innerHTML = 
                `<div class="success">Đã tải ví dụ mẫu với p=17. Nhấn "Tìm Phần Tử Sinh" để xem kết quả.</div>`;
        }
    </script>
</body>
</html>